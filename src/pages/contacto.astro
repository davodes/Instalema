---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

const title = "Contacto - Instalema | Presupuesto gratuito sin compromiso";
const description = "Contacta con Instalema para solicitar presupuesto gratuito. Teléfono, email, formulario de contacto y ubicación. Atención profesional garantizada.";
---

<Layout title={title} description={description}>
  <Header />
  
  <main>
    <!-- Hero Section -->
    <section class="pb-10 section-padding bg-gradient-to-br from-dark-300 to-dark-300 text-white">
      <div class="mt-20 mb-5 container-max text-center">
        <h1 class="text-4xl md:text-5xl font-bold mb-6">
          Contacta con nosotros
        </h1>
        <p class="text-xl text-gray-300 max-w-3xl mx-auto">
          Estamos aquí para ayudarte. Solicita tu presupuesto gratuito sin compromiso 
          o contacta con nuestro equipo profesional.
        </p>
      </div>
    </section>

    <!-- Contact Section -->
    <section class="section-padding pt-4">
      <div class="container-max">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
          <!-- Contact Form -->
          <div class="bg-[#2a2a2a33] border-[#ffffff0a] shadow-[0_0_0_1px_#5dff0008] rounded-2xl p-8">
            <h2 class="text-3xl font-bold text-white mb-6">
              Solicita tu presupuesto
            </h2>
            <p class="text-dark-100 mb-8">
              Completa el formulario y nos pondremos en contacto contigo en menos de 24 horas.
            </p>

            <!-- Web3Forms Key -->
            <form
              action="https://api.web3forms.com/submit"
              method="POST"
              id="contact-form"
              class="space-y-6" id="contact-form"
            >
            <!-- Honeypot -->
            <input type="checkbox" name="botcheck" class="hidden" style="display:none">

              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <label for="name" class="block text-sm font-medium text-white mb-2">
                    Nombre completo *
                  </label>
                  <input 
                    type="text" 
                    id="name" 
                    name="name" 
                    required
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-400 focus:border-transparent transition-colors"
                    placeholder="Tu nombre"
                  >
                </div>
                <div>
                  <label for="phone" class="block text-sm font-medium text-white mb-2">
                    Teléfono *
                  </label>
                  <input 
                    type="tel" 
                    id="phone" 
                    name="phone" 
                    required
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-400 focus:border-transparent transition-colors"
                    placeholder="600 456 789"
                  >
                </div>
              </div>

              <div>
                <label for="email" class="block text-sm font-medium text-white mb-2">
                  Email *
                </label>
                <input 
                  type="email" 
                  id="email" 
                  name="email" 
                  required
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-400 focus:border-transparent transition-colors"
                  placeholder="tu@email.com"
                >
              </div>

              <div>
                <label for="service" class="block text-sm font-medium text-white mb-2">
                  Servicio solicitado *
                </label>
                <select 
                  id="service" 
                  name="service"
                  required
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-400 focus:border-transparent transition-colors"
                >
                  <option value="">Selecciona un servicio</option>
                  <option value="electricidad">Instalaciones eléctricas</option>
                  <option value="fontaneria">Fontanería</option>
                  <option value="gas">Instalaciones de gas</option>
                  <option value="climatizacion">Climatización</option>
                  <option value="mantenimiento">Mantenimiento técnico</option>
                  <option value="reformas">Reformas integrales</option>
                  <option value="urgencia">Servicio de urgencia</option>
                </select>
              </div>

              <div>
                <label for="message" class="block text-sm font-medium text-white mb-2">
                  Describe tu proyecto *
                </label>
                <textarea 
                  id="message" 
                  name="message" 
                  required
                  rows="5"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-400 focus:border-transparent transition-colors resize-none"
                  placeholder="Describe con detalle tu proyecto o consulta para poder ofrecerte el mejor servicio..."
                ></textarea>
              </div>

              <div class="flex items-start space-x-3 hover:cursor-pointer">
              <input 
                type="checkbox" 
                id="privacy" 
                name="privacy" 
                required
                class="mt-1 w-4 h-4 text-primary-400 border-gray-300 rounded focus:ring-primary-400 hover:cursor-pointer"
              >
              <label for="privacy" class="text-sm text-dark-100 hover:cursor-pointer">
                Acepto la <a href="/privacidad" class="text-primary-400 hover:text-primary-400">política de privacidad</a> y el tratamiento de mis datos personales *
              </label>
            </div>

              <button 
                type="submit"
                class="btn-primary flex items-center justify-center gap-2 w-full bg-primary-400 hover:bg-primary-400 text-dark-950 px-8 py-4 rounded-lg font-semibold transition-all duration-200 hover:scale-105 hover:shadow-xl hover:shadow-primary-600/25 disabled:opacity-50 disabled:cursor-not-allowed"
                id="submit-btn"
              >
                <span id="submit-text">Enviar mensaje</span>
                <svg xmlns="http://www.w3.org/2000/svg" width="18" viewBox="0 0 20 20" fill="none">
                  <path d="M16.6719 0.386615C17.0783 0.240566 17.5173 0.210609 17.9395 0.302631C18.3699 0.396531 18.7647 0.612217 19.0762 0.923725C19.3877 1.23523 19.6034 1.63003 19.6973 2.06044C19.7893 2.48235 19.7591 2.92094 19.6133 3.32705L19.6143 3.32802L14.6582 18.1786L14.6592 18.1796C14.5356 18.5542 14.3177 18.891 14.0264 19.1571C13.7372 19.4213 13.385 19.6061 13.004 19.6962C12.62 19.7905 12.2181 19.7843 11.8379 19.6757C11.4609 19.5679 11.1179 19.3642 10.8428 19.0849L8.21293 16.4667L5.46 17.8905C5.22448 18.0123 4.94155 18.001 4.71684 17.8602C4.49211 17.7194 4.35842 17.4701 4.36528 17.205L4.48149 12.7235L0.916059 9.1581L0.917036 9.15712C0.650846 8.89109 0.453889 8.56349 0.345747 8.20302C0.239336 7.84804 0.222067 7.47264 0.293989 7.10927C0.367146 6.70632 0.546399 6.32987 0.81352 6.01943C1.08069 5.70906 1.42597 5.47504 1.81352 5.34267L1.8184 5.34169L16.6719 0.385639V0.386615ZM5.98051 12.7792L5.8975 15.9745L8.00981 14.8827C8.29931 14.7331 8.65286 14.7876 8.88383 15.0175L11.9014 18.0214L11.9092 18.0292C12.0032 18.1255 12.1207 18.1963 12.25 18.2333C12.3793 18.2702 12.516 18.2722 12.6465 18.2401L12.6563 18.2382C12.7899 18.2071 12.9134 18.1422 13.0147 18.0497C13.1161 17.9571 13.1914 17.8393 13.2344 17.7089L13.2354 17.7069L18.1915 2.85341L18.2002 2.829C18.2331 2.74046 18.2477 2.64715 18.2481 2.55361L5.98051 12.7792ZM2.29301 6.76454C2.16026 6.8109 2.04201 6.89132 1.95024 6.99794C1.85736 7.10588 1.79507 7.23676 1.76957 7.37685C1.76853 7.38261 1.76685 7.3887 1.76567 7.39443C1.73987 7.51975 1.74554 7.6498 1.78227 7.77236C1.80984 7.86424 1.85452 7.95004 1.91313 8.02529L1.97661 8.09755L5.2852 11.4061L16.5674 2.00087L2.29301 6.76454Z" fill="currentColor"/>
                </svg>
              </button>
            </form>
          </div>

          <!-- Contact Info -->
          <div>
            <div class="space-y-8">
              <!-- Phone -->
              <div class="bg-[#2a2a2a33] border-[#ffffff0a] shadow-[0_0_0_1px_#5dff0008] rounded-2xl p-6 ">
                <div class="flex items-center space-x-4">
                  <div class="w-16 h-16 bg-primary-400 rounded-lg flex items-center justify-center flex-shrink-0">
                    <svg class="w-8 h-8 text-dark-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                    </svg>
                  </div>
                  <div>
                    <h3 class="text-lg font-semibold text-white">Teléfono</h3>
                    <a href="tel:+34687425421" class="text-primary-400 hover:text-primary-700 text-xl font-medium">
                      687 425 421
                    </a>
                    <p class="text-sm text-dark-100">Disponible 24h para urgencias</p>
                  </div>
                </div>
              </div>

              <!-- Email -->
              <div class="bg-[#2a2a2a33] border-[#ffffff0a] shadow-[0_0_0_1px_#5dff0008] rounded-2xl p-6 ">
                <div class="flex items-center space-x-4">
                  <div class="w-16 h-16 bg-primary-400 rounded-lg flex items-center justify-center flex-shrink-0">
                    <svg class="w-8 h-8 text-dark-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                    </svg>
                  </div>
                  <div>
                    <h3 class="text-lg font-semibold text-white">Email</h3>
                    <a href="mailto:info@instalema.com" class="text-primary-400 hover:text-primary-700 text-xl font-medium">
                      info@instalema.com
                    </a>
                    <p class="text-sm text-dark-100">Respuesta en menos de 24h</p>
                  </div>
                </div>
              </div>

              <!-- Address -->
              <div class="bg-[#2a2a2a33] border-[#ffffff0a] shadow-[0_0_0_1px_#5dff0008] rounded-2xl p-6 ">
                <div class="flex items-center space-x-4">
                  <div class="w-16 h-16 bg-primary-400 rounded-lg flex items-center justify-center flex-shrink-0">
                    <svg class="w-8 h-8 text-dark-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    </svg>
                  </div>
                  <div>
                    <h3 class="text-lg font-semibold text-white">Dirección</h3>
                    <div class="text-dark-100 text-lg">
                      Cami Ral, 37<br>
                      08185 Lliçà de Vall, Barcelona
                    </div>
                    <!-- <a href="/ubicacion" class="text-primary-400 hover:text-primary-700 text-sm">
                      Ver en el mapa →
                    </a> -->
                  </div>
                </div>
              </div>

              <!-- Schedule -->
              <div class="bg-[#2a2a2a33] border-[#ffffff0a] shadow-[0_0_0_1px_#5dff0008] rounded-2xl p-6 ">
                <div class="flex items-center space-x-4">
                  <div class="w-16 h-16 bg-primary-400 rounded-lg flex items-center justify-center flex-shrink-0">
                    <svg class="w-8 h-8 text-dark-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                  </div>
                  <div>
                    <h3 class="text-lg font-semibold text-white">Horario</h3>
                    <div class="text-dark-100">
                      <div class="mb-1">Lun - Vie: 7:00 - 19:00</div>
                      <div class="text-primary-400 font-medium">Urgencias 24h</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ Section -->
    <section class="section-padding">
      <div class="container-max">
        <div class="text-center mb-12">
          <h2 class="text-3xl font-bold text-white mb-4">
            Preguntas frecuentes
          </h2>
          <p class="text-xl text-dark-100">
            Respuestas a las consultas más comunes de nuestros clientes
          </p>
        </div>

        <div class="max-w-3xl mx-auto space-y-4">
          <div class="bg-[#2a2a2a33] border-[#ffffff0a] shadow-[0_0_0_1px_#5dff0008] rounded-lg">
            <button class="w-full px-6 py-4 text-left flex items-center justify-between font-medium text-white hover:text-primary-400 faq-button">
              ¿Ofrecen servicios de urgencia?
              <svg class="w-5 h-5 transform transition-transform faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
            <div class="px-6 pb-4 text-dark-100 faq-content hidden">
              Sí, ofrecemos servicio de urgencias 24 horas los 365 días del año. Contacta por teléfono para emergencias eléctricas, de fontanería o gas.
            </div>
          </div>

          <div class="bg-[#2a2a2a33] border-[#ffffff0a] shadow-[0_0_0_1px_#5dff0008] rounded-lg">
            <button class="w-full px-6 py-4 text-left flex items-center justify-between font-medium text-white hover:text-primary-400 faq-button">
              ¿Los presupuestos son gratuitos?
              <svg class="w-5 h-5 transform transition-transform faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
            <div class="px-6 pb-4 text-dark-100 faq-content hidden">
              Todos nuestros presupuestos son completamente gratuitos y sin compromiso. Nos desplazamos para evaluar tu proyecto personalmente.
            </div>
          </div>

          <div class="bg-[#2a2a2a33] border-[#ffffff0a] shadow-[0_0_0_1px_#5dff0008] rounded-lg">
            <button class="w-full px-6 py-4 text-left flex items-center justify-between font-medium text-white hover:text-primary-400 faq-button">
              ¿Qué garantía ofrecen en sus trabajos?
              <svg class="w-5 h-5 transform transition-transform faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
            <div class="px-6 pb-4 text-dark-100 faq-content hidden">
              Ofrecemos garantía de 2 años en todos nuestros trabajos de instalación y 1 año en reparaciones. Los materiales incluyen la garantía del fabricante.
            </div>
          </div>

          <div class="bg-[#2a2a2a33] border-[#ffffff0a] shadow-[0_0_0_1px_#5dff0008] rounded-lg">
            <button class="w-full px-6 py-4 text-left flex items-center justify-between font-medium text-white hover:text-primary-400 faq-button">
              ¿En qué zonas trabajan?
              <svg class="w-5 h-5 transform transition-transform faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
            <div class="px-6 pb-4 text-dark-100 faq-content hidden">
              Trabajamos principalmente en Madrid y área metropolitana. Para proyectos especiales podemos desplazarnos a otras ubicaciones.
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>
  
  <Footer />
</Layout>

<script>
  // FAQ functionality
  const faqButtons = document.querySelectorAll('.faq-button');
  
  faqButtons.forEach(button => {
    button.addEventListener('click', () => {
      const content = button.nextElementSibling;
      const icon = button.querySelector('.faq-icon');
      
      content?.classList.toggle('hidden');
      icon?.classList.toggle('rotate-180');
    });
  });
</script>
<script src="https://web3forms.com/client/script.js" defer></script>
<script>
  const form = document.querySelector<HTMLFormElement>(
    'form[action="https://api.web3forms.com/submit"]'
  );
  const status = document.getElementById(
    "form-status"
  ) as HTMLParagraphElement | null;

  if (form && status) {
    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      status.textContent = "Enviando...";

      const formData = new FormData(form);
      try {
        const response = await fetch(form.action, {
          method: form.method,
          body: formData,
          headers: { Accept: "application/json" },
        });

        if (response.ok) {
          status.textContent = "Mensaje enviado correctamente.";
          form.reset();
        } else {
          status.textContent =
            "Error al enviar el mensaje. Intenta nuevamente.";
        }
      } catch {
        status.textContent = "Error de conexión. Revisa tu red.";
      }
    });
  }
</script>